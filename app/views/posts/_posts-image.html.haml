.mainber
  .mainber__header
    .mainber__header__head
      %span.mainber__head__image
        = link_to exhibition_path(id: post.user.id) do
          - if post.user.image?
            = image_tag post.user.image.url, size: "42", class: "tops-icon"
          - else
            = image_tag src="user1.png", size: "42", class: "tops-icon"
      .mainber__header__head__name-place
        .mainber__header__head__name-place__name
          = link_to exhibition_path(id: post.user.id) do
            = post.user.username
        .mainber__header__head__name-place__place
          = link_to exhibition_path(id: post.user.id) do
            = post.user.nickname
  %span.mainber__images
    =link_to post_path(post) do
      - if post.images.first.image.file.content_type.include?('image/')
        = image_tag post.images.first.image.url, class: "main-new-arrival__product--image--first slick", size: "614"
      - else
        = video_tag post.images.first.image.url, class: "main-new-arrival__product--image--first slick", size: "614", controls: true, loop: true
  %section.mainber__icon
    %span.mainber__icon__heart
      = render partial: 'likes/like', locals: { post: post }
    %span.mainber__icon__comment
      = icon('far fa-comment',  class: "mainber__icon__heart__btn--icon")
    %span.mainber__icon__share
      = icon('far fa-share-square',  class: "mainber__icon__heart__btn--icon")


  %section.mainber__fab{ id: "mainber__fab-#{ post.id }" }
    = post.likes.length
    %span 人が「いいね！」しました
  .mainber__username
    = link_to exhibition_path(id: post.user.id) do
      = post.user.username
  .mainber__content
    = post.content
  .mainber__time
    %time(datetime="#{post.created_at}")= time_ago_in_words(post.created_at)
  .comments-index{ id: "comments-create-#{ post.id }" }
    - if post.comments
      - post.comments.each do |comment|
        .comments-post__box
          .comments-post__box__add
            .comments-post__box__add__box
              .comments-post__box__add__box__name
                = link_to exhibition_path(id: comment.user.id) do
                  = comment.user.username
              .comments-post__box__add__box__content
                = comment.content
              .comments-post__box__time
                %time(datetime="#{comment.created_at}")= time_ago_in_words(comment.created_at)
          .comment-post__box__add__delete
            - if user_signed_in? && current_user.id == comment.user_id
              =link_to "削除", post_comment_path(post_id: post.id, id: comment.id), method: :delete, class: "comments-delete"
 
  .mainber__comment
    = form_with model: [post, @comment], local: true, class: "new-comment" do |f|
      .mainber__comment__box
        = f.text_area :content, class: "comment-text", id: "comment-text", placeholder: 'コメントを追加...'
        = f.submit "投稿する", class: "comment-submit", id: "comment-submit"